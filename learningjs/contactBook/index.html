<html>

<head>
    <meta charset="UTF-8">
    <title>Contact Book</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body onload="fetchContacts()">

    <div id="table">Contact loading</div>
    <button id="refresh">Refresh</button>
    <button id="addContact">Add Contact</button>

    <script src="config.js"></script>
    <script>
        document.getElementById("refresh").addEventListener("click", fetchContacts);
        document.getElementById("addContact").addEventListener("click", addContacts);



        function fetchContacts() {
            fetch(rootPath + "controller/get-contacts/")
                .then(function (response) {
                    return response.json();
                })
                .then(function (data) {
                    displayOutput(data);
                })
        }
        function displayOutput(data) {
            output = "<table>";
            for (a in data) {
                output +=
                    `<tr onClick="editContact(${data[a].id})">
                    <td>"<img src="${rootPath}controller/uploads/${data[a].avatar}"  width="40"/></td>
                    <td><h5>${data[a].firstname}</h5></td>
                    <td><h5>${data[a].lastname}</h5></td>

                    </tr>`
            }
            output += "</table>";
            document.getElementById("table").innerHTML = output;
        }
    function addContacts() {
        window.open("addContact.html",  "_self");
    }
    function editContact(id){
       window.open("editContact.html?id=" + id, "_self");




    }
   
    </script>
</body>

</html>